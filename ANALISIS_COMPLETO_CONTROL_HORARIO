# üìä **DESCRIPCI√ìN ANAL√çTICA Y EXHAUSTIVA DE LA APLICACI√ìN "Team Time Management"**

## üéØ **RESUMEN EJECUTIVO**

La aplicaci√≥n de Time es un sistema completo de gesti√≥n de horarios empresarial desarrollado con arquitectura moderna full-stack, dise√±ado para empresas multinacionales con capacidades globales avanzadas. La aplicaci√≥n combina gesti√≥n de empleados, control de horarios, c√°lculos de previsi√≥n horaria, calendarios interactivos y un sistema de gesti√≥n autom√°tica de festivos a nivel mundial.

---
Proyecto en GITHUB: https://github.com/MrChorusman/Team_time_management

**NOTA**: Las credenciales y tokens de acceso est√°n configurados en variables de entorno locales para seguridad.


##  **ARQUITECTURA GENERAL**

### **Stack Tecnol√≥gico:**
- **Frontend**: React + Vite + React Router 
- **Backend**: Flask + SQLAlchemy + Flask-Security-Too
- **Base de Datos**: PostgreSQL (Supabase) + SQLite (desarrollo local)
- **Autenticaci√≥n**: BUSCAR UN SISTEMA DE GESTI√ìN DE USUARIOS, CON VALIDACI√ìN DE EMAIL Y POSIBILIDAD DE REGISTRO V√çA GOOGLE

### **Estructura del Proyecto:**
Aplicacion_Control_horario/
‚îú‚îÄ‚îÄ app-control-horarios-backend/ # API Flask
‚îú‚îÄ‚îÄ app-control-horarios-frontend/ # React App

#### **Servicios Avanzados:**
- **HolidayServiceNew**: Gesti√≥n autom√°tica de festivos globales
- **HoursCalculator**: C√°lculos complejos de horas y eficiencia
- **HealthMonitor**: Monitoreo de sistema en tiempo real
- **MetricsCollector**: Recopilaci√≥n de m√©tricas de rendimiento

### **2. FRONTEND (React)**

#### **Componentes Principales:**
- **App.jsx**: Layout principal con navegaci√≥n lateral
- **Dashboard**: Panel de control con m√©tricas
- **Calendar**: Calendario interactivo con gesti√≥n de actividades
- **Admin**: Panel para la gesti√≥n de todas las funcionalides y campos de la aplicaci√≥n
- **EmployeeForm**: Formulario de registro de empleados
- **Summary**: Res√∫menes y reportes
- **LoginPage**: Autenticaci√≥n de usuarios

DISE√ëO Y UX

Layout Visual:
Grid Responsivo: 2 columnas en desktop, 1 en m√≥vil
Cards: Dise√±o con sombras y bordes redondeados
Colores: Toda la aplicaci√≥n ser√° en blanco y negro
Tipo de letra:sans-serif geom√©trica y moderna
Iconos: Se utilizaran los iconos SVG, nunca emojis
Espaciado: Padding y m√°rgenes optimizados
Feedback Visual:
Mensajes de √âxito:  icono de check
Mensajes de Error: icono de alerta
Estados de Carga: Bot√≥n deshabilitado con texto "Registrando..."
Validaciones: Errores en rojo debajo de cada campo
Accesibilidad:
Labels: Todos los campos tienen etiquetas asociadas
Placeholders: Textos de ayuda descriptivos
Focus: Navegaci√≥n por teclado funcional
ARIA: Atributos de accesibilidad implementados

Pantalla de Registro/LOGIN
- Una pantalla moderna con las funcionalidades standard de las pantallas de login/registro de las aplicaciones actuales
- La pantalla estar√≠a dividida en dos partes; la izquierda (25% de la ventana)con todo el apartado de login/registro y la derecha (un 75% de la ventana) con una imagen que evoque la vida laboral, registros horarios, calendarios, etc...

#### **Caracter√≠sticas UI/UX:**
- **Navegaci√≥n lateral** con leyenda de actividades
- **Dise√±o responsive** preparado para m√≥viles
- **Sistema de roles** (admin/user/manager/employee/viewer)
- **Gesti√≥n de estado** con React Context
- **Routing protegido** con autenticaci√≥n
--

** Ejemplo de Operativa ** 

1. Un usuario llega a nuestra aplicaci√≥n, lo recibe nuestra ventana de registro/login
2. Se registra con un formulario de registro standard, se enviar√° un correo de verificaci√≥n de email y la aplicaci√≥n no le permitir√° el acceso hasta que verifique el email
3. Una vez verifique su email registraremos su usuario en la aplicaci√≥n con el rol viewer y no cambiar√° su rol a employee hasta que no complete su registro como empleado
4. Al entrar con sus datos de acceso lo √∫nico que podr√° ver ser√° el formulario de regitro de empleado, donde deber√° introducir todos los datos requeridos 
5. Una vez completado el formulario se enviar√° un email al manager del equipo al que el usaurio se ha registrado y cuando el manager apruebe su solicitud se le asignar√° el rol empleado
6. Una vez tenga el rol employee ya podr√° acceder a ver su calendario con el resto de los empleados de su mismo equipo

- Si un usuario es admin puede acceder a todas las funcionalidades de la aplicaci√≥n


---

**REGISTRO Y GESTI√ìN DE EMPLEADOS **

El formulario de registro de empleado debe ser un componente  completo y robusto que permite registrar nuevos empleados en el sistema de control horario. Debe combinar una interfaz intuitiva con validaciones exhaustivas tanto en frontend como backend, e incluir funcionalidades avanzadas de gesti√≥n.

- CAMPOS DEL FORMULARIO

1. Informaci√≥n B√°sica del Empleado:

A. Nombre del Equipo (Requerido)
    * Tipo: Select desplegable
    * Validaci√≥n: Campo obligatorio, no puede estar vac√≠o
    * Funcionalidad:
        - Lista desplegable con equipos existentes en la base de datos y previamente registrados a trav√©s del panel Admin
        - Autocompletado inteligente
        - Sugerencias basadas en equipos previos
    Ejemplo: "Desarrollo Frontend", "Marketing Digital"
B. Nombre y Apellidos (Requerido)
    * Tipo: Campo de texto
    * Validaci√≥n:
        - Campo obligatorio
        - M√≠nimo 2 caracteres
        - No puede duplicarse (verificaci√≥n en backend)
    Ejemplo: "Juan P√©rez Garc√≠a"

2. Configuraci√≥n Horaria:

A. Horas Lunes a Jueves (Requerido)
    * Tipo: Campo num√©rico
    * Validaci√≥n:
        - Entre 0 y 12 horas
        - Acepta decimales (step 0.5)
        - N√∫mero positivo obligatorio
    Ejemplo: 8, 7.5, 6
B. Horas Viernes (Requerido)
    * Tipo: Campo num√©rico
    * Validaci√≥n:
        - Entre 0 y 12 horas
        - Acepta decimales (step 0.5)
        - N√∫mero positivo obligatorio
    Ejemplo: 7, 6.5, 5
C. Horario de Verano
    * Tipo: Campo num√©rico
    * Validaci√≥n:
        - Entre 0 y 12 horas
        - Acepta decimales (step 0.5)
        - N√∫mero positivo obligatorio
    Ejemplo: 8, 7.5, 6

3. Beneficios Laborales:

A. D√≠as de Vacaciones Anuales (Requerido)
    * Tipo: Campo num√©rico entero
    * Validaci√≥n:
        - Entre 1 y 40 d√≠as
        - N√∫mero entero positivo
    Ejemplo: 22, 25, 30

B. Horas de Libre Disposici√≥n Anuales (Requerido)
    * Tipo: Campo num√©rico entero
    * Validaci√≥n:
        - Entre 0 y 200 horas
        - N√∫mero entero no negativo
    Ejemplo: 40, 60, 80

4. Ubicaci√≥n Geogr√°fica:

A. Comunidad Aut√≥noma (Requerido)
        * Tipo: Select desplegable
        * Opciones: 19 comunidades aut√≥nomas espa√±olas
        * Lista completa:
        - Andaluc√≠a, Arag√≥n, Asturias, Baleares, Canarias
        - Cantabria, Castilla-La Mancha, Castilla y Le√≥n
        - Catalu√±a, Comunidad Valenciana, Extremadura
        - Galicia, La Rioja, Madrid, Murcia, Navarra
        - Pa√≠s Vasco, Ceuta, Melilla
7. ¬øTiene horario verano?
    * Tipo: Buelano
    * Opciones: S√≠ / No
6. Meses horario Verano
    Tipo: Select despleable multiopci√≥n
    * Validaci√≥n: Campo obligatorio, no puede estar vac√≠o si seleccion√≥ como positivo si tiene horario verano
    * Funcionalidad:
        - Lista desplegable con meses del a√±o

    Ejemplo: Julio, Agosto

--
  



---

## üåç **SISTEMA GLOBAL DE FESTIVOS**

### **Caracter√≠sticas Revolucionarias:**

#### **Cobertura Mundial:**
- **118 pa√≠ses** disponibles para carga autom√°tica
- **589 festivos** cargados actualmente
- **26.27% de cobertura** (31 pa√≠ses activos)
- **87 pa√≠ses** listos para carga inmediata

#### **Jerarqu√≠a Inteligente:**

üá™üá∏ Espa√±a (Nacional)
‚îî‚îÄ‚îÄ Galicia (Auton√≥mico)
‚îî‚îÄ‚îÄ A Coru√±a (Local)
‚îú‚îÄ‚îÄ Navidad (Nacional)
‚îú‚îÄ‚îÄ Santiago Ap√≥stol (Auton√≥mico)
‚îî‚îÄ‚îÄ San Juan (Local)

#### **Carga Autom√°tica:**
- **API Nager.Date**: Fuente oficial gubernamental
- **Detecci√≥n autom√°tica** al registrar empleados
- **Prevenci√≥n de duplicados** inteligente
- **Categorizaci√≥n autom√°tica** (Nacional/Auton√≥mico/Local)

#### **Estad√≠sticas Actuales:**
- üá∫üá∏ **Estados Unidos**: 45 festivos
- üá™üá∏ **Espa√±a**: 39 festivos
- üá≥üá¶ **Namibia**: 36 festivos
- üá®üá¶ **Canad√°**: 31 festivos
- üá¶üá∫ **Australia**: 24 festivos

---

##  **GESTI√ìN DE CALENDARIO Y HORARIOS**

### **Tipos de Actividades:**
- **V** - Vacaciones (Verde claro)
- **F** - Ausencias (Amarillo claro)
- **HLD** - Horas Libre Disposici√≥n (Verde)
- **G** - Guardia (Naranja)
- **A** - Formaci√≥n/Evento (Morado)
- **C** - Permiso/Otro (Azul claro)

### **Funcionalidades del Calendario:**
- **Vista mensual** interactiva
--**Vista anual** global
- **Gesti√≥n por empleado** individual
- **C√°lculo autom√°tico** de horas trabajadas
- **Integraci√≥n con festivos** autom√°tica
- **Validaci√≥n de datos** en tiempo real

### **C√°lculos Avanzados:**
- **Horas semanales** por empleado y/o equipo
- **Horas mensuales** te√≥ricas vs reales
- **Eficiencia por equipo** y global
- **Proyecciones** de horas futuras
- **An√°lisis de tendencias**

--

## **M√âTRICAS Y AN√ÅLISIS**

### **Dashboard Principal:**
- **Resumen por equipos** con eficiencia
- **M√©tricas globales** de la empresa
- **Proyecciones** de horas mensuales
- **An√°lisis de tendencias** temporales
- **Alertas** de rendimiento

### **Reportes Disponibles:**
- **Resumen anual** por empleado
- **Eficiencia por equipo**
- **An√°lisis de festivos** por regi√≥n
- **Proyecciones** de carga de trabajo
- **M√©tricas de asistencia**

---

## üåü **CARACTER√çSTICAS DESTACADAS**

### **1. Escalabilidad Global:**
- Soporte para **cualquier pa√≠s del mundo**
- Carga autom√°tica de festivos
- Estructura geogr√°fica jer√°rquica
- APIs gubernamentales oficiales
- Paginaci√≥n preparada para muchos empleados
- Filtros por equipo y comunidad
- API RESTful bien estructurada
- Componentes reutilizables

### **2. Automatizaci√≥n Inteligente:**
- Detecci√≥n autom√°tica de pa√≠ses sin festivos
- Carga inteligente sin duplicados
- C√°lculos autom√°ticos de horas
- Validaci√≥n de datos en tiempo real

### **3. Arquitectura Moderna:**
- Separaci√≥n clara frontend/backend
- API RESTful bien dise√±ada
- Autenticaci√≥n JWT segura
- Testing completo implementado

### **4. Experiencia de Usuario:**
- Interfaz intuitiva y responsive
- Navegaci√≥n fluida  
- Feedback visual inmediato
- Gesti√≥n de errores robusta
- Formulario intuitivo con campos claramente etiquetados
- Validaci√≥n en tiempo real con feedback inmediato
- Autocompletado inteligente para equipos
- Mensajes descriptivos de error y √©xito

---

## üéØ **CASOS DE USO PRINCIPALES**

### **1. Gesti√≥n de Empleados Multinacionales:**
- Registro de empleados de cualquier pa√≠s
- Carga autom√°tica de festivos espec√≠ficos
- Gesti√≥n de horarios por regi√≥n
- An√°lisis de eficiencia global

### **2. Control de Horarios Avanzado:**
- Calendario interactivo mensual
- Tipos de actividad configurables
- C√°lculos autom√°ticos de horas
- Proyecciones y an√°lisis

### **3. Administraci√≥n Empresarial:**
- Panel de control con m√©tricas
- Gesti√≥n de usuarios y roles
- Monitoreo de sistema
- Reportes autom√°ticos
---
**EXPLICACI√ìN DEL CALENDARIO LABORAL ***

¬øQU√â ES EL CALENDARIO?
El calendario es como un "tablero de control visual" donde cada empleado puede ver y gestionar sus actividades laborales de forma muy intuitiva. Es como tener un calendario de pared digital pero mucho m√°s inteligente, porque autom√°ticamente sabe qu√© d√≠as son festivos, fines de semana, y te permite marcar tus vacaciones, ausencias y otras actividades con solo hacer clic.
C√ìMO SE VE EL CALENDARIO
Estructura Visual:
Columnas Principales:
Equipo: Nombre del equipo (Frontend, Backend, etc.)
Empleado: Nombre completo del empleado
Vac: D√≠as de vacaciones del mes
Aus: D√≠as de ausencias del mes
1-31: Cada d√≠a del mes con sus actividades

Bajo cada mes del calendario se deber√≠a ver una leyenda con la informaci√≥n de los festivos que hay para ese mes a nivel del pa√≠s, comunidad aut√≥noma y ciudad de los empleados que se muestran.

El calendario debe tener dos opciones de visualizaci√≥n:
- Vista mensual donde √∫nicamente se ve en la pantalla el mes el curso y se puede ir navegando con las flechas entre los meses del a√±o
- Vista anual donde en la pantalla se ven todos los meses del a√±o de manera consecutiva y se necesita hacer escroll para ir viendo todo el a√±o.

C√ìDIGO DE COLORES
Colores por Tipo de Actividad:
 VERDE CLARO - Vacaciones (V)
Cu√°ndo: Cuando te vas de vacaciones
Qu√© hace: Resta todas las horas del d√≠a (d√≠a completo perdido)
Ejemplo: Si tienes 8h configuradas y marcas V, ese d√≠a cuenta 0h
 AMARILLO - Ausencias (A)
Cu√°ndo: Cuando faltas por enfermedad, cita m√©dica, etc.
Qu√© hace: Resta todas las horas del d√≠a (d√≠a completo perdido)
Ejemplo: Si tienes 8h configuradas y marcas A, ese d√≠a cuenta 0h
VERDE OSCURO - Horas Libre Disposici√≥n (HLD)
Cu√°ndo: Cuando tomas horas libres (salir antes, llegar tarde)
Qu√© hace: Resta solo las horas que especifiques
Ejemplo: Si tienes 8h y tomas 2h libres, ese d√≠a cuenta 6h
Se muestra: "HLD -2h" (con el n√∫mero de horas)
 AZUL CLARO - Guardia (G)
Cu√°ndo: Cuando haces guardia o horas extra
Qu√© hace: Suma las horas que especifiques
Ejemplo: Si tienes 8h y haces 4h de guardia, ese d√≠a cuenta 12h
Se muestra: "G +4h" (con el n√∫mero de horas)
 MORADO - Formaci√≥n/Evento (F)
Cu√°ndo: Cuando vas a formaci√≥n, eventos de empresa, etc.
Qu√© hace: Resta solo las horas que especifiques
Ejemplo: Si tienes 8h y tomas 2h libres, ese d√≠a cuenta 6h
Se muestra: "F -2h" (con el n√∫mero de horas)
 AZUL CLARO - Permiso/Otro (C)
Cu√°ndo: Otros permisos, citas personales, etc.
Qu√© hace: Resta todas las horas del d√≠a (d√≠a completo perdido)
Ejemplo: Si tienes 8h configuradas y marcas C, ese d√≠a cuenta 0h
Colores del Sistema:
 ROJO CLARO - Festivos
Cu√°ndo: D√≠as festivos nacionales o de tu comunidad
Qu√© hace: No puedes marcar actividades (d√≠a no laborable)
Autom√°tico: El sistema los marca autom√°ticamente seg√∫n tu comunidad
 GRIS - Fines de Semana
Cu√°ndo: S√°bados y domingos
Qu√© hace: No puedes marcar actividades (d√≠a no laborable)
Autom√°tico: El sistema los marca autom√°ticamente
 BLANCO - D√≠as Laborables Vac√≠os
Cu√°ndo: D√≠as normales sin actividades marcadas
Qu√© hace: Cuenta las horas normales seg√∫n tu configuraci√≥n
Ejemplo: Si tienes 8h L-J configuradas, cuenta 8h
 C√ìMO USAR EL CALENDARIO
Paso 1: Navegaci√≥n
Paso 2: Marcar Actividades
Paso 3: Actividades con Horas
Paso 4: Eliminar Actividades
EJEMPLO PR√ÅCTICO DE USO
Escenario: Juan del equipo Frontend en Enero 2025
Configuraci√≥n de Juan:
Horario: 8h Lunes-Jueves, 7h Viernes
Comunidad: Madrid
Actividades que marca:
Semana 1 (1-5 enero):
1 enero:  Festivo (autom√°tico) - No puede marcar nada
2 enero:  Vacaciones - Marca "V" (d√≠a completo perdido)
3 enero:  Normal - No marca nada (cuenta 8h)
4 enero:  HLD - Marca "HLD" con 2h (cuenta 6h)
5 enero:  Normal - No marca nada (cuenta 7h)
Semana 2 (6-12 enero):
6 enero:  Guardia - Marca "G" con 4h (cuenta 12h)
7 enero:  Normal - No marca anada (cuenta 8h)
8 enero:  Ausencia - Marca "A" (d√≠a completo perdido)
9 enero:  Normal - No marca nada (cuenta 8h)
10 enero:  Normal - No marca nada (cuenta 7h)
11 enero:  Fin de semana (autom√°tico)
12 enero:  Fin de semana (autom√°tico)
Resultado Visual:
C√°lculo de Horas:
 CARACTER√çSTICAS INTELIGENTES
1. Festivos Autom√°ticos:
Nacionales: Navidad, A√±o Nuevo, etc. (para todos)
Regionales: Santiago Ap√≥stol en Galicia, San Juan en A Coru√±a, etc.
Espec√≠ficos: Cada empleado ve solo los festivos de su comunidad
2. Validaciones Inteligentes:
No puedes marcar actividades en festivos o fines de semana
Solo puedes marcar en d√≠as laborables (blancos)
El sistema previene errores autom√°ticamente
3. Resumen Autom√°tico:
Contador de vacaciones: Te dice cu√°ntos d√≠as de vacaciones llevas
Contador de ausencias: Te dice cu√°ntos d√≠as has faltado
Actualizaci√≥n en tiempo real: Los n√∫meros se actualizan al marcar actividades
4. Responsive y M√≥vil:
Se adapta a pantallas peque√±as
Scroll horizontal para ver todos los d√≠as
Funciona en m√≥viles y tablets
 CONSEJOS DE USO
Para Empleados:
Marca las actividades tan pronto como sepas que vas a faltar
Usa HLD para salir antes o llegar tarde (m√°s flexible que vacaciones)
Usa Guardia para horas extra que hagas
Revisa el resumen para ver c√≥mo vas de vacaciones y ausencias
Para Managers:
Revisa el calendario para ver la disponibilidad del equipo
Controla las vacaciones para planificar proyectos
Identifica patrones de ausencias o guardias
Usa los datos para el forecast y facturaci√≥n
 VENTAJAS DEL SISTEMA
Para el Empleado:
‚úÖ Visual e intuitivo - Ves todo de un vistazo
‚úÖ Autom√°tico - No tienes que calcular festivos
‚úÖ Flexible - Puedes marcar actividades parciales (HLD)
‚úÖ Inmediato - Los cambios se ven al instante
Para la Empresa:
‚úÖ Control total - Sabes exactamente qui√©n est√° disponible
‚úÖ Datos precisos - Para facturaci√≥n y forecast
‚úÖ Prevenci√≥n de errores - No puedes marcar d√≠as imposibles
‚úÖ Historial completo - Queda registro de todas las actividades
 RESULTADO FINAL
El calendario te da un control visual completo de tu tiempo laboral:
Ves el mes completo con todas tus actividades
Colores intuitivos que entiendes al instante
 Marcado r√°pido con clic derecho
Resumen autom√°tico de vacaciones y ausencias
Validaciones inteligentes que previenen errores
Funciona en cualquier dispositivo
Es como tener un asistente personal que se encarga de todos los c√°lculos complicados mientras t√∫ solo tienes que hacer clic para marcar tus actividades. ¬°S√∫per f√°cil y eficiente!  
---
** EXPLICACI√ìN DEL C√ÅLCULO DE FORECAST ** 

¬øQU√â ES EL FORECAST?
El forecast es un sistema de proyecci√≥n y an√°lisis de horas que calcula autom√°ticamente cu√°ntas horas deber√≠a trabajar cada empleado, cu√°ntas ha trabajado realmente, y c√≥mo se distribuyen esas horas entre los diferentes proyectos . Es como tener una bola de crista que te dice si tu equipo est√° cumpliendo con los objetivos.

 LOS TRES TIPOS DE C√ÅLCULOS PRINCIPALES
1.  HORAS TE√ìRICAS (Lo que deber√≠a trabajar)
"¬øCu√°ntas horas deber√≠a trabajar Juan este mes?"
El sistema toma cada d√≠a del mes y pregunta:
¬øEs fin de semana? ‚Üí Si es s√°bado o domingo, no cuenta
¬øEs festivo? ‚Üí Si es festivo nacional o de su comunidad, no cuenta
¬øEl proyecto tiene horario de verano? ‚Üí Si lo tiene ser√° un horario especial
¬øQu√© d√≠a de la semana es? ‚Üí
Lunes a Jueves: usa las horas configuradas del empleado (ej: 8h)
Viernes: usa las horas de viernes (ej: 7h)
Ejemplo pr√°ctico:
2.  HORAS REALES (Lo que realmente trabaj√≥)
"¬øCu√°ntas horas trabaj√≥ Juan realmente este mes?"
El sistema mira el calendario del empleado y aplica las deducciones:
Vacaciones (V): Si Juan se fue de vacaciones, ese d√≠a cuenta 0 horas
Ausencias (F): Si Juan falt√≥ por enfermedad, ese d√≠a cuenta 0 horas
Horas Libre Disposici√≥n (HLD): Si Juan tom√≥ 2h libres, se restan de las horas del d√≠a
Guardias (G): Si Juan hizo guardia, se suman esas horas extra
Ejemplo pr√°ctico:
3.  DISTRIBUCI√ìN POR PROYECTOS 
Aqu√≠ viene la parte m√°s compleja e interesante:
 HORAS EMPRESA 1 cuaya facturaci√≥n se calcula  del d√≠a 1 al √∫ltimo d√≠a del mes 
"¬øCu√°ntas horas trabaj√≥ Juan para INDRA este mes?"
Per√≠odo: Del d√≠a 1 al √∫ltimo d√≠a del mes
C√°lculo: Toma las horas reales del mes completo

HORAS EMPRESA 2 cuaya facturaci√≥n se calcula Del d√≠a 26 del mes anterior al d√≠a 25 del mes actual
"¬øCu√°ntas horas trabaj√≥ Juan para INDITEX este mes?"
Per√≠odo: Del d√≠a 26 del mes anterior al d√≠a 25 del mes actual
Ejemplo: Para enero 2025, cuenta del 26 de diciembre 2024 al 25 de enero 2025
C√°lculo: Toma las horas reales de ese per√≠odo espec√≠fico

¬øPor qu√© este per√≠odo raro?
Es porque EMPRESA 2 tiene un calendario diferente, como si fuera un "mes corrido" que empieza a mediados de mes.

 EJEMPLO REAL COMPLETO
Datos del Empleado:
Nombre: Mar√≠a Garc√≠a
Equipo: Desarrollo Frontend
Horario: 8h L-J, 7h Viernes
Comunidad: Madrid
Mes: Enero 2025
D√≠as laborables: 22 d√≠as (sin festivos)
Horas te√≥ricas: (16 L-J √ó 8h) + (6 V √ó 7h) = 170h
Actividades del Mes:
Vacaciones: 2 d√≠as (16h menos)
Horas libres: 3 d√≠as con 2h cada uno (6h menos)
Guardia: 1 d√≠a con 4h extra (+4h)
C√°lculo Final:
Distribuci√≥n por Proyectos:
EMPRESA 1 : 152h (per√≠odo 1-31 enero)
EMPRESA 2 : 158h (per√≠odo 26 dic - 25 ene)
Eficiencia: (152/170) √ó 100 = 89.4%
üéØ ¬øPARA QU√â SIRVE ESTO?
Para los Empleados:
Saber si est√°n cumpliendo con sus objetivos de horas
Ver su eficiencia en tiempo real
Planificar vacaciones sin afectar demasiado el rendimiento
Para los Managers:
Controlar el rendimiento de cada equipo
Detectar problemas de asistencia o productividad
Planificar recursos para proyectos futuros
Justificar facturaci√≥n a clientes (EMPRESA 1 /EMPRESA 2)
Para la Empresa:
Cumplir contratos con clientes
Optimizar recursos humanos
Predecir necesidades de personal
Mantener calidad del servicio
üîç CASOS ESPECIALES
Horario de Verano (Julio-Agosto por ejemplo):
Todos trabajan 7h por d√≠a independientemente de su configuraci√≥n
Es una pol√≠tica de empresa para el verano
Festivos:
Nacionales: Afectan a todos (Navidad, A√±o Nuevo, etc.)
Regionales: Solo afectan a empleados de esa comunidad
Locales: Solo afectan a empleados de esa ciudad
Per√≠odo por EMPRESA:
En el panel de administraci√≥n debe existir un apartado para introducir difentes empresas e indicar el periodo de facturaci√≥n mensual para cada una de ellas, con ese dato se ralizar√° el c√°lculo

RESULTADO FINAL
El sistema te da un reporte completo que incluye:
‚úÖ Horas te√≥ricas que deber√≠a trabajar
‚úÖ Horas reales que trabaj√≥ realmente
‚úÖ Horas para diferentes periodos de facturaci√≥n
‚úÖ Porcentaje de eficiencia (¬øcumple objetivos?)
‚úÖ Estado del rendimiento (Excelente/Bueno/Mejorable)
‚úÖ Desglose por actividades (vacaciones, ausencias, etc.)
Es como tener un asistente personal que calcula autom√°ticamente todo lo que necesitas saber sobre el rendimiento de tu equipo, sin que tengas que hacer c√°lculos manuales ni revisar calendarios complicados.

--
**AN√ÅLISIS COMPLETO DE LA BASE DE DATOS SUPABASE**

1Ô∏è‚É£ TODAS LAS TABLAS (11 tablas)
Tabla	Tama√±o	Descripci√≥n
holidays_new	96 kB	D√≠as festivos nuevos (589 registros)
cities	40 kB	Ciudades (201 registros)
countries	40 kB	Pa√≠ses (188 registros)
autonomous_communities	8 kB	Comunidades aut√≥nomas (74 registros)
holidays	8 kB	D√≠as festivos (63 registros)
provinces	8 kB	Provincias (52 registros)
roles	8 kB	Roles de usuario (5 registros)
employees	8 kB	Empleados (4 registros)
roles_users	8 kB	Relaci√≥n usuarios-roles (4 registros)
users	16 kB	Usuarios del sistema (4 registros)
calendar_entries	8 kB	Entradas de calendario (0 registros)
2Ô∏è‚É£ RELACIONES ENTRE TABLAS (15 Foreign Keys)
Diagrama de Relaciones:
countries (id) ‚Üê‚îÄ‚îÄ autonomous_communities (country_id)
                ‚Üê‚îÄ‚îÄ employees (country_id)
                ‚Üê‚îÄ‚îÄ holidays_new (country_id)

autonomous_communities (id) ‚Üê‚îÄ‚îÄ cities (autonomous_community_id)
                           ‚Üê‚îÄ‚îÄ employees (autonomous_community_id)
                           ‚Üê‚îÄ‚îÄ holidays (autonomous_community_id)
                           ‚Üê‚îÄ‚îÄ holidays_new (autonomous_community_id)
                           ‚Üê‚îÄ‚îÄ provinces (autonomous_community_id)

provinces (id) ‚Üê‚îÄ‚îÄ employees (province_id)
              ‚Üê‚îÄ‚îÄ holidays (province_id)

cities (id) ‚Üê‚îÄ‚îÄ employees (city_id)
           ‚Üê‚îÄ‚îÄ holidays_new (city_id)

employees (id) ‚Üê‚îÄ‚îÄ calendar_entries (employee_id)

users (id) ‚Üê‚îÄ‚îÄ roles_users (user_id)

roles (id) ‚Üê‚îÄ‚îÄ roles_users (role_id)

3Ô∏è‚É£ REGISTROS POR TABLA
Tabla	Registros	Estado
holidays_new	589	‚úÖ Datos completos
cities	201	‚úÖ Datos completos
countries	188	‚úÖ Datos completos
autonomous_communities	74	‚úÖ Datos completos
holidays	63	‚úÖ Datos completos
provinces	52	‚úÖ Datos completos
roles	5	‚úÖ Datos completos
employees	4	‚úÖ Datos completos
roles_users	4	‚úÖ Datos completos
users	4	‚úÖ Datos completos
calendar_entries	0	‚ö†Ô∏è Sin datos
4Ô∏è‚É£ DATOS DETALLADOS POR TABLA
ÔøΩÔøΩ EMPLEADOS (4 registros)
ID	Nombre	Equipo	Horas L-V	Horas V	Vacaciones	Horas Libres	Comunidad	Ciudad
10	Luis Federico	Monitorizaci√≥n	9	7	22	40	Galicia	A Coru√±a
11	Marie Dubois	Desarrollo	8	7	25	35	Galicia	A Coru√±a
12	Jo√£o Silva	Marketing	8	7	30	40	Galicia	A Coru√±a
13	Aisha Hamunyela	Ventas	8	7	21	40	Galicia	A Coru√±a
üë§ USUARIOS (4 registros)
ID	Email	Nombre	Estado	Confirmado
2	miguelchis@gmail.com	Administrador del Sistema	‚úÖ Activo	‚ùå Pendiente
3	test@example.com	Usuario Test	‚úÖ Activo	‚úÖ Confirmado
5	admin@example.com	-	‚úÖ Activo	‚úÖ Confirmado
6	testuser@example.com	Usuario de Prueba	‚úÖ Activo	‚úÖ Confirmado
üîê ROLES (5 registros)
ID	Nombre	Descripci√≥n
42	admin	Administrator
43	user	Regular user
44	manager	Gestor de equipos
45	employee	Empleado b√°sico
46	viewer	Solo lectura
üîó ASIGNACI√ìN DE ROLES (4 registros)
Usuario ID	Rol ID	Usuario	Rol
2	42	miguelchis@gmail.com	admin
3	42	test@example.com	admin
5	43	admin@example.com	user
5	42	admin@example.com	admin
üåç DATOS GEOGR√ÅFICOS
Pa√≠ses (188 registros)
Espa√±a, Francia, Portugal, Brasil, etc.
Incluye pa√≠ses de todo el mundo
Comunidades Aut√≥nomas (74 registros)
Andaluc√≠a, Arag√≥n, Galicia, etc.
Incluye comunidades de Espa√±a y otros pa√≠ses
Ciudades (201 registros)
A Coru√±a, Madrid, Barcelona, Par√≠s, etc.
Ciudades de Espa√±a y otros pa√≠ses
üìÖ D√çAS FESTIVOS
holidays (63 registros)
60 nacionales (A√±o Nuevo, Epifan√≠a, Viernes Santo, etc.)
2 auton√≥micos (D√≠a de Andaluc√≠a, etc.)
1 local
holidays_new (589 registros)
Base de datos m√°s completa de festivos
Incluye festivos de m√∫ltiples pa√≠ses y regiones
üìä CALENDAR_ENTRIES (0 registros)
‚ö†Ô∏è Tabla vac√≠a - Sin entradas de calendario registradas
Lista para recibir datos de horarios de empleados
‚úÖ RESUMEN DEL ESTADO
Fortalezas:
‚úÖ Conexi√≥n estable con Supabase
‚úÖ Estructura de base de datos bien dise√±ada
‚úÖ Relaciones entre tablas correctas
‚úÖ Datos geogr√°ficos completos
‚úÖ Sistema de usuarios y roles funcional
‚úÖ Empleados registrados correctamente
